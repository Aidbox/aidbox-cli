#!/usr/bin/env coffee 

# Shift <coffee> from argv
process.argv.shift()

cli   = require 'cli'

box   = require './utils/box'
oauth = require './utils/oauth'

cli.parse {
    list : ['l', 'List data']
  }, ['login', 'logout', 'box', 'user', 'deploy', 'test']


# Deploy app
deploy=()->
  i = 0
  interval = setInterval ()->
    cli.progress ++i / 100
    if i == 100
      clearInterval interval
      cli.ok 'Finished!'
  , 10

cli.main (args, options)->
  switch cli.command
    when 'login'  then oauth.login(args)
    when 'logout' then oauth.logout()
    when 'box'    then box(args, options)
    when 'deploy' then deploy()
    when 'test'   then test()
